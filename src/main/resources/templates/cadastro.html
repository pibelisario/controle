<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Cadastro</title>
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" rel="stylesheet">
  <script crossorigin="anonymous"
          integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js">

  </script>
  <style>
    body {

      width: 1000px;
      margin: auto;
    }

    header {
      text-align: center;
      margin: auto;
    }

    div {
      background-color: aliceblue;
      padding: 10px;
    }
  </style>


</head>

<body>

<header>
  <nav class="navbar bg-primary" data-bs-theme="dark">
    <form class="container-fluid justify-content-start">
      <a th:href="@{/adc/entradas}" class="btn btn-warning">Entradas</a>
      <a th:href="@{/adc/cadastro}" class="btn btn-success">Cadastro</a>
    </form>
  </nav>
</header>

<div class="container">
  <div class="row">
    <form action="/adc" class="col s12" method="post">
      <div class="row">
        <div class="input-fiel col s6">
          <label class="form-label" for="rg">Rg</label>
          <input class="form-control" id="rg" name="rg" placeholder="Digite rg sem pontos" type="text">
        </div>
        <div class="input-fiel col s6">
          <label class="form-label" for="nome">Nome</label>
          <input class="form-control" id="nome" name="nome" placeholder="Nome" type="text">
        </div>
      </div>
      <div class="row">
        <div class="input-fiel col s6">
          <label class="form-label" for="cpf">cpf</label>
          <input autocomplete="off" class="form-control" id="cpf" name="cpf" onkeyup="mascaraCpf('___.___.___-__', this)"
                 placeholder="Digite cpf sem pontos" type="text">
        </div>
        <div class="input-fiel col s6">
          <label class="form-label" for="categoria">Categoria</label>
          <input class="form-control" id="categoria" name="categoria" placeholder="categoria" type="text">
        </div>
      </div>
      <div class="row">
        <div class="input-fiel col s6">
          <label class="form-label" for="celular">Telefone Celular:</label>
          <input autocomplete="off" class="form-control" id="celular" name="celular"
                 onkeyup="mascaraCel('(##)#####-####', this)" placeholder="Celular" type="text">
        </div>
        <div class="input-fiel col s6">
          <label class="form-label" for="telefone">Telefone Celular:</label>
          <input autocomplete="off" class="form-control" id="telefone" name="telefone"
                 onkeyup="mascaraFixo('(##)####-####', this)" placeholder="Celular" type="text">
        </div>
      </div>
      <button type="submit" class="btn btn-primary">Cadastrar</button>
      <button type="submit" class="btn btn-danger">Cancelar</button>
    </form>
  </div>
</div>
<script>
    function mascaraCpf(mascara, input) {
      const vetMask = mascara.split("")
      const numCpf = input.value.replace(/\D/g, "")
      const cursor = input.selectionStart
      const tecla = (window.event) ? event.keyCode : event.which

      for (let i = 0; i < numCpf.length; i++) {
        vetMask.splice(vetMask.indexOf("_"), 1, numCpf[i])
      }
      input.value = vetMask.join("")
      if (tecla != 37 && (cursor == 3 || cursor == 7 || cursor == 11)) {
        input.setSelectionRange(cursor + 1, cursor + 1)
      } else {
        input.setSelectionRange(cursor, cursor)
      }
    }

    function mascaraCel(mascara, input) {
      const vetMask = mascara.split("")
      const numCel = input.value.replace(/\D/g, "")
      const cursor = input.selectionStart
      const tecla = (window.event) ? event.keyCode : event.which

      for (let i = 0; i < numCel.length; i++) {
        vetMask.splice(vetMask.indexOf("#"), 1, numCel[i])
      }
      input.value = vetMask.join("")
      if (tecla != 37 && (cursor == 1 || cursor == 3 || cursor == 9)) {
        input.setSelectionRange(cursor + 1, cursor + 1)
      } else {
        input.setSelectionRange(cursor, cursor)
      }

    }

    function mascaraFixo(mascara, input){
			const vetMask = mascara.split("") 
			const numTel = input.value.replace(/\D/g, "")
			const cursor = input.selectionStart
			const tecla = (window.event) ? event.keyCode : event.which

			for (let i = 0; i < numTel.length; i++){
				vetMask.splice(vetMask.indexOf("#"), 1, numTel[i])
			}
			input.value = vetMask.join("")
			if (tecla != 37 && (cursor == 1 || cursor == 3 || cursor ==8)){
				input.setSelectionRange(cursor+1, cursor+1)
			} else {
				input.setSelectionRange(cursor, cursor)
			}
			
	}

</script>
</body>

</html>